<!-- Sidebar Desktop -->
<div
  class="sidebar hidden md:flex h-screen bg-zinc-900 text-white flex-col justify-between transition-all duration-300 overflow-hidden"
  [ngClass]="{
    'w-[300px]': open || !animate,
    'w-[80px]': !open && animate
  }"
  (mouseenter)="setOpen(true)"
  (mouseleave)="setOpen(false)"
>
  <!-- Logo -->
  <div class="flex items-center gap-3 px-4 py-6">
    <div class="bg-white w-6 h-6 rounded shrink-0"></div>
    <span
      class="text-xl font-semibold transition-all duration-300 whitespace-nowrap overflow-hidden"
      [class.opacity-0]="!open && animate"
      [class.w-0]="!open && animate"
      [class.ml-0]="!open && animate"
      [class.ml-2]="open || !animate"
    >
      Rilievi e Perizie
    </span>
  </div>

  <!-- Navigazione -->
  <nav class="flex flex-col gap-2 px-2">
    <a
      routerLink="dashboard"
      class="flex items-center h-10 px-4 py-2 hover:bg-zinc-800 rounded-md transition-colors duration-200"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 3h6v6H3V3zm0 12h6v6H3v-6zm12-6h6v6h-6V9zm0 12h6v-6h-6v6z"/>
      </svg>
      <span
        class="text-sm font-medium transition-all duration-300 whitespace-nowrap overflow-hidden"
        [class.opacity-0]="!open && animate"
        [class.w-0]="!open && animate"
        [class.ml-0]="!open && animate"
        [class.ml-2]="open || !animate"
      >
        Dashboard
      </span>
    </a>

    <a
      routerLink="mappa"
      class="flex items-center h-10 px-4 py-2 hover:bg-zinc-800 rounded-md transition-colors duration-200"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 20l-5.447-2.724A2 2 0 013 15.382V5.618a2 2 0 011.553-1.894L9 1m6 0l5.447 2.724A2 2 0 0121 5.618v9.764a2 2 0 01-1.553 1.894L15 20M9 1v19m6-19v19"/>
      </svg>
      <span
        class="text-sm font-medium transition-all duration-300 whitespace-nowrap overflow-hidden"
        [class.opacity-0]="!open && animate"
        [class.w-0]="!open && animate"
        [class.ml-0]="!open && animate"
        [class.ml-2]="open || !animate"
      >
        Mappa
      </span>
    </a>

    <a
      routerLink="perizie"
      class="flex items-center h-10 px-4 py-2 hover:bg-zinc-800 rounded-md transition-colors duration-200"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 7a2 2 0 012-2h14a2 2 0 012 2v11a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M16 3v4M8 3v4m4-4v4"/>
      </svg>
      <span
        class="text-sm font-medium transition-all duration-300 whitespace-nowrap overflow-hidden"
        [class.opacity-0]="!open && animate"
        [class.w-0]="!open && animate"
        [class.ml-0]="!open && animate"
        [class.ml-2]="open || !animate"
      >
        Perizie
      </span>
    </a>
  </nav>

  <!-- Profilo + Logout -->
  <div class="flex items-center px-4 py-6 gap-3 justify-between">
    <!-- Avatar + nome -->
    <div class="flex items-center gap-3 overflow-hidden">
      <img
        [src]="profilePicture || 'assets/img/default-avatar.png'"
        alt="Utente"
        class="w-10 h-10 rounded-full shrink-0"
      />
      <div
        class="text-sm transition-all duration-300 whitespace-nowrap overflow-hidden"
        [class.opacity-0]="!open && animate"
        [class.w-0]="!open && animate"
        [class.ml-0]="!open && animate"
        [class.ml-2]="open || !animate"
      >
        <p class="font-semibold">{{ username }}</p>
      </div>
    </div>

    <!-- Icona Logout sempre visibile -->
    <button
    (click)="logout()"
    class="logout-icon text-white hover:text-red-500 opacity-70 hover:opacity-100 transition"
  >
    <svg
      *ngIf="open || !animate"
      xmlns="http://www.w3.org/2000/svg"
      class="w-5 h-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M17 16l4-4m0 0l-4-4m4 4H7"
      />
    </svg>
  </button>
  </div>
</div>
